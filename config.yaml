# ✨✨✨ 添加调试开关（放在文件最顶部）
debug: true  # 设为 true 启用详细调试输出
# 模型配置
model:
  path: "./Qwen3-0.6B"
  dtype: "float16"
  
  # ✨ 新增：LoRA微调配置
  lora:
    enabled: false
    adapter_path: "./script/output/lora_online_v2"
    checkpoint: ""
  
  # 第一阶段：快速检测
  fast_detection:
    max_new_tokens: 10
    temperature: 0.0
    use_rag: true  # ✨ 启用RAG
    use_lora: true
    prompt: ./prompt/base_fast_detection.txt
    # ✨ RAG配置
    rag_top_k: 3  # 检索相似案例数量
    rag_knowledge_top_k: 1  # 检索知识库数量
  
  # 第二阶段：深度分析
  deep_analysis:
    max_new_tokens: 512
    temperature: 0.3
    use_rag: true  # ✨ 启用RAG
    use_lora: true
    prompt: ./prompt/base_deep_analysis.txt
    # ✨ RAG配置
    rag_top_k: 5  # 检索相似案例数量
    rag_knowledge_top_k: 3  # 检索知识库数量

# RAG配置
rag:
  enabled: false
  model_name: "./bge-small-en-v1.5"
  dimension: 384
  use_gpu: true
  
  # ✨ 修改：url_history 改为文件夹
  url_history_folder: "./data/rag/url_history"  # 存放各种攻击类型的URL文件夹
  chunks_folder: "./data/rag/chunks"  # 攻击知识库
  
  index_path: "./data/rag/faiss.index"
  metadata_path: "./data/rag/metadata.pkl"
  
  # 相似度阈值
  similarity_threshold: 0.90
# 数据配置
data:
# dir: "./data/processed/WAF-github/part"
# normal_file: "good-500.txt"
# attack_file: "bad-500.txt"
#  dir: "./data/processed/CCF-BDCI2022/total"
#  normal_file: "all_normal.txt"
#  attack_file: "all_attacks.txt"

   dir: "./data/processed/CSIC-2010/part"
   normal_file: "normal-100.txt"
   attack_file: "attack-100.txt"
#    dir: "./script/data/finetune_online/raw"  #第二次微调
#    normal_file: "normal.txt"
#    attack_file: "attack.txt"

# 规则引擎配置
rules:
  enabled: false
  normal_rules_file: "./src/rules/rule_store/normal_rules.yaml"
  anomalous_rules_file: "./src/rules/rule_store/anomalous_rules.yaml"

# 输出配置
output:
  dir: "./output"
  stage1_all: "stage1_realtime_all.json"
  stage1_anomalous: "stage1_anomalous.txt"
  stage2_deep_analysis: "stage2_deep_analysis.json"